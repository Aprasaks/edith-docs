---
title: "Next.js 14 App Router 마이그레이션 가이드"
description: "Pages Router에서 App Router로 안전하고 효율적으로 마이그레이션하는 완벽한 방법"
category: "Next.js"
date: "2025-06-19"
readTime: "20min"
tags: ["Next.js", "App Router", "Migration", "React", "SSR"]
status: "updated"
author: "DemianDev"
slug: "nextjs-app-router"
---

# 🛣️ Next.js 14 App Router 마이그레이션 가이드

Next.js 13에서 도입되어 14에서 안정화된 App Router는 React의 최신 기능들을 활용한 새로운 라우팅 시스템입니다. Pages Router에서 App Router로 마이그레이션하는 완전한 가이드를 제공합니다.

## 📖 목차

1. [App Router vs Pages Router](#-app-router-vs-pages-router)
2. [폴더 구조 변화](#-폴더-구조-변화)
3. [레이아웃 시스템](#-레이아웃-시스템)
4. [라우팅 방식](#-라우팅-방식)
5. [데이터 페칭](#-데이터-페칭)
6. [단계별 마이그레이션](#-단계별-마이그레이션)
7. [성능 최적화](#-성능-최적화)
8. [실전 예제](#-실전-예제)

## 🆚 App Router vs Pages Router

### Pages Router (기존 방식)

```
pages/
├── _app.js         # 글로벌 레이아웃
├── _document.js    # HTML 문서 구조
├── index.js        # 홈페이지 (/)
├── about.js        # About 페이지 (/about)
├── blog/
│   ├── index.js    # 블로그 목록 (/blog)
│   └── [slug].js   # 블로그 상세 (/blog/[slug])
└── api/
    └── users.js    # API 라우트
```

### App Router (새로운 방식)

```
app/
├── layout.js      # 루트 레이아웃
├── page.js        # 홈페이지 (/)
├── about/
│   └── page.js    # About 페이지 (/about)
├── blog/
│   ├── layout.js  # 블로그 레이아웃
│   ├── page.js    # 블로그 목록 (/blog)
│   └── [slug]/
│       └── page.js # 블로그 상세 (/blog/[slug])
└── api/
    └── users/
        └── route.js # API 라우트
```

## 📁 폴더 구조 변화

### 1. 특수 파일들

| 파일명 | 역할 | Pages Router 대응 |
|--------|------|-------------------|
| `layout.js` | 레이아웃 정의 | `_app.js` |
| `page.js` | 페이지 컴포넌트 | `index.js` |
| `loading.js` | 로딩 UI | 수동 구현 필요 |
| `error.js` | 에러 UI | `_error.js` |
| `not-found.js` | 404 페이지 | `404.js` |
| `route.js` | API 라우트 | `api/*.js` |

### 2. 파일 기반 라우팅 변화

```jsx
// Pages Router
// pages/products/[category]/[id].js
export default function Product({ category, id }) {
  return <div>Product: {category}/{id}</div>;
}

// App Router  
// app/products/[category]/[id]/page.js
export default function Product({ params }) {
  return <div>Product: {params.category}/{params.id}</div>;
}
```

## 🎨 레이아웃 시스템

### 루트 레이아웃 (필수)

```jsx
// app/layout.js
export const metadata = {
  title: 'My App',
  description: 'Generated by create next app',
}

export default function RootLayout({ children }) {
  return (
    <html lang="ko">
      <body>
        <header>
          <nav>
            <a href="/">홈</a>
            <a href="/about">소개</a>
            <a href="/blog">블로그</a>
          </nav>
        </header>
        <main>{children}</main>
        <footer>
          <p>&copy; 2024 My Company</p>
        </footer>
      </body>
    </html>
  )
}
```

### 중첩 레이아웃

```jsx
// app/blog/layout.js
export default function BlogLayout({ children }) {
  return (
    <div className="blog-container">
      <aside className="sidebar">
        <h2>카테고리</h2>
        <ul>
          <li><a href="/blog/react">React</a></li>
          <li><a href="/blog/nextjs">Next.js</a></li>
          <li><a href="/blog/javascript">JavaScript</a></li>
        </ul>
      </aside>
      <div className="blog-content">
        {children}
      </div>
    </div>
  )
}

// app/blog/page.js
export default function BlogIndex() {
  return (
    <div>
      <h1>블로그</h1>
      <p>최신 개발 관련 글들을 확인하세요!</p>
    </div>
  )
}
```

### 레이아웃 그룹 (선택적 레이아웃)

```
app/
├── (marketing)/          # 레이아웃 그룹
│   ├── layout.js        # 마케팅 레이아웃
│   ├── about/
│   │   └── page.js
│   └── contact/
│       └── page.js
├── (shop)/              # 다른 레이아웃 그룹
│   ├── layout.js        # 쇼핑 레이아웃
│   ├── products/
│   │   └── page.js
│   └── cart/
│       └── page.js
└── layout.js            # 루트 레이아웃
```

## 🛣️ 라우팅 방식

### 1. 동적 라우팅

```jsx
// app/users/[id]/page.js
export default function UserProfile({ params }) {
  const { id } = params;
  
  return (
    <div>
      <h1>사용자 프로필</h1>
      <p>사용자 ID: {id}</p>
    </div>
  );
}

// 다중 동적 세그먼트
// app/shop/[category]/[product]/page.js
export default function ProductDetail({ params }) {
  const { category, product } = params;
  
  return (
    <div>
      <h1>{category} / {product}</h1>
    </div>
  );
}
```

### 2. Catch-all 라우팅

```jsx
// app/docs/[...slug]/page.js
export default function DocsPage({ params }) {
  const { slug } = params; // slug는 배열
  
  return (
    <div>
      <h1>문서</h1>
      <p>경로: {slug?.join('/') || ''}</p>
    </div>
  );
}

// 선택적 Catch-all
// app/shop/[[...category]]/page.js - category가 없어도 매칭
```

### 3. 병렬 라우팅

```
app/
├── layout.js
├── page.js
├── @analytics/          # 슬롯
│   └── page.js
├── @team/               # 슬롯
│   └── page.js
└── @user/               # 슬롯
    └── page.js
```

```jsx
// app/layout.js
export default function Layout({ children, analytics, team, user }) {
  return (
    <div>
      <div>{children}</div>
      <div className="dashboard">
        <div>{user}</div>
        <div>{team}</div>
        <div>{analytics}</div>
      </div>
    </div>
  )
}
```

## 📊 데이터 페칭

### 1. 서버 컴포넌트 (기본)

```jsx
// app/posts/page.js
async function getPosts() {
  const res = await fetch('https://jsonplaceholder.typicode.com/posts', {
    next: { revalidate: 3600 } // 1시간마다 재검증
  });
  
  if (!res.ok) {
    throw new Error('Failed to fetch posts');
  }
  
  return res.json();
}

export default async function PostsPage() {
  const posts = await getPosts();
  
  return (
    <div>
      <h1>게시글 목록</h1>
      {posts.map(post => (
        <article key={post.id}>
          <h2>{post.title}</h2>
          <p>{post.body}</p>
        </article>
      ))}
    </div>
  );
}
```

### 2. 클라이언트 컴포넌트

```jsx
'use client'

import { useState, useEffect } from 'react';

export default function InteractiveComponent() {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetch('/api/data')
      .then(res => res.json())
      .then(data => {
        setData(data);
        setLoading(false);
      });
  }, []);

  if (loading) return <div>로딩 중...</div>;

  return (
    <div>
      <h2>인터랙티브 컴포넌트</h2>
      <button onClick={() => console.log('클릭!')}>
        클릭하세요
      </button>
    </div>
  );
}
```

### 3. 스트리밍과 Suspense

```jsx
// app/dashboard/page.js
import { Suspense } from 'react';

async function Analytics() {
  // 느린 데이터 페칭
  await new Promise(resolve => setTimeout(resolve, 3000));
  return <div>분석 데이터</div>;
}

async function RecentPosts() {
  // 빠른 데이터 페칭
  await new Promise(resolve => setTimeout(resolve, 1000));
  return <div>최근 게시글</div>;
}

export default function Dashboard() {
  return (
    <div>
      <h1>대시보드</h1>
      
      <Suspense fallback={<div>최근 게시글 로딩 중...</div>}>
        <RecentPosts />
      </Suspense>
      
      <Suspense fallback={<div>분석 데이터 로딩 중...</div>}>
        <Analytics />
      </Suspense>
    </div>
  );
}
```

## 🔄 단계별 마이그레이션

### 1단계: 프로젝트 준비

```bash
# Next.js 14로 업그레이드
npm install next@latest react@latest react-dom@latest

# TypeScript 프로젝트인 경우
npm install -D @types/react @types/node typescript
```

### 2단계: app 디렉토리 생성

```
your-project/
├── pages/          # 기존 Pages Router (유지)
├── app/            # 새로운 App Router (추가)
│   └── layout.js   # 루트 레이아웃 생성
└── next.config.js
```

### 3단계: 루트 레이아웃 설정

```jsx
// app/layout.js
export const metadata = {
  title: 'My App',
  description: 'Migrating to App Router',
}

export default function RootLayout({ children }) {
  return (
    <html lang="ko">
      <body>{children}</body>
    </html>
  )
}
```

### 4단계: 페이지별 점진적 마이그레이션

```jsx
// 기존: pages/about.js
export default function About() {
  return <div>About Page</div>;
}

// 새로운: app/about/page.js
export default function About() {
  return <div>About Page</div>;
}
```

### 5단계: API 라우트 마이그레이션

```jsx
// 기존: pages/api/users.js
export default function handler(req, res) {
  if (req.method === 'GET') {
    res.status(200).json({ users: [] });
  }
}

// 새로운: app/api/users/route.js
export async function GET() {
  return Response.json({ users: [] });
}

export async function POST(request) {
  const data = await request.json();
  // POST 처리 로직
  return Response.json({ success: true });
}
```

### 6단계: 데이터 페칭 마이그레이션

```jsx
// 기존: Pages Router의 getServerSideProps
export async function getServerSideProps() {
  const res = await fetch('https://api.example.com/data');
  const data = await res.json();
  
  return { props: { data } };
}

export default function Page({ data }) {
  return <div>{data.title}</div>;
}

// 새로운: App Router의 서버 컴포넌트
async function getData() {
  const res = await fetch('https://api.example.com/data');
  return res.json();
}

export default async function Page() {
  const data = await getData();
  return <div>{data.title}</div>;
}
```

## ⚡ 성능 최적화

### 1. 캐싱 전략

```jsx
// Static Generation (기본값)
async function getData() {
  const res = await fetch('https://api.example.com/posts');
  return res.json();
}

// Incremental Static Regeneration
async function getData() {
  const res = await fetch('https://api.example.com/posts', {
    next: { revalidate: 3600 } // 1시간마다 재생성
  });
  return res.json();
}

// Dynamic Rendering
async function getData() {
  const res = await fetch('https://api.example.com/posts', {
    cache: 'no-store' // 항상 최신 데이터
  });
  return res.json();
}
```

### 2. 로딩 UI

```jsx
// app/blog/loading.js
export default function Loading() {
  return (
    <div className="animate-pulse">
      <div className="h-4 bg-gray-200 rounded w-3/4 mb-4"></div>
      <div className="h-4 bg-gray-200 rounded w-1/2 mb-4"></div>
      <div className="h-4 bg-gray-200 rounded w-5/6"></div>
    </div>
  );
}
```

### 3. 에러 처리

```jsx
// app/blog/error.js
'use client'

export default function Error({ error, reset }) {
  return (
    <div className="error-container">
      <h2>문제가 발생했습니다!</h2>
      <p>{error.message}</p>
      <button onClick={() => reset()}>
        다시 시도
      </button>
    </div>
  );
}
```

### 4. 메타데이터 최적화

```jsx
// app/blog/[slug]/page.js
export async function generateMetadata({ params }) {
  const post = await getPost(params.slug);
  
  return {
    title: post.title,
    description: post.excerpt,
    openGraph: {
      title: post.title,
      description: post.excerpt,
      images: [post.image],
    },
  };
}

export default async function Post({ params }) {
  const post = await getPost(params.slug);
  
  return (
    <article>
      <h1>{post.title}</h1>
      <p>{post.content}</p>
    </article>
  );
}
```

## 💡 실전 예제: 블로그 사이트 마이그레이션

### 기존 Pages Router 구조

```
pages/
├── _app.js
├── _document.js
├── index.js              # 홈
├── blog/
│   ├── index.js          # 블로그 목록
│   └── [slug].js         # 블로그 상세
└── api/
    └── posts/
        └── [slug].js
```

### 새로운 App Router 구조

```
app/
├── layout.js             # 루트 레이아웃
├── page.js               # 홈
├── blog/
│   ├── layout.js         # 블로그 레이아웃
│   ├── page.js           # 블로그 목록
│   ├── loading.js        # 로딩 UI
│   ├── error.js          # 에러 UI
│   └── [slug]/
│       ├── page.js       # 블로그 상세
│       └── loading.js    # 상세 로딩 UI
└── api/
    └── posts/
        └── [slug]/
            └── route.js
```

### 구현 예제

```jsx
// app/layout.js
export const metadata = {
  title: '개발 블로그',
  description: 'React, Next.js 개발 이야기',
}

export default function RootLayout({ children }) {
  return (
    <html lang="ko">
      <body className="bg-gray-50">
        <header className="bg-white shadow">
          <nav className="max-w-7xl mx-auto px-4">
            <div className="flex justify-between h-16">
              <div className="flex items-center">
                <a href="/" className="text-xl font-bold">
                  개발 블로그
                </a>
              </div>
              <div className="flex space-x-8">
                <a href="/" className="text-gray-700 hover:text-gray-900">
                  홈
                </a>
                <a href="/blog" className="text-gray-700 hover:text-gray-900">
                  블로그
                </a>
              </div>
            </div>
          </nav>
        </header>
        <main>{children}</main>
        <footer className="bg-gray-800 text-white py-8">
          <div className="max-w-7xl mx-auto px-4 text-center">
            <p>&copy; 2024 개발 블로그. All rights reserved.</p>
          </div>
        </footer>
      </body>
    </html>
  )
}

// app/blog/layout.js
export default function BlogLayout({ children }) {
  return (
    <div className="max-w-7xl mx-auto px-4 py-8">
      <div className="grid grid-cols-1 lg:grid-cols-4 gap-8">
        <aside className="lg:col-span-1">
          <div className="bg-white p-6 rounded-lg shadow">
            <h2 className="text-lg font-semibold mb-4">카테고리</h2>
            <ul className="space-y-2">
              <li><a href="/blog/react" className="text-blue-600 hover:text-blue-800">React</a></li>
              <li><a href="/blog/nextjs" className="text-blue-600 hover:text-blue-800">Next.js</a></li>
              <li><a href="/blog/javascript" className="text-blue-600 hover:text-blue-800">JavaScript</a></li>
            </ul>
          </div>
        </aside>
        <div className="lg:col-span-3">
          {children}
        </div>
      </div>
    </div>
  )
}

// app/blog/page.js
async function getPosts() {
  const res = await fetch('https://api.example.com/posts', {
    next: { revalidate: 3600 }
  });
  return res.json();
}

export default async function BlogPage() {
  const posts = await getPosts();
  
  return (
    <div>
      <h1 className="text-3xl font-bold mb-8">블로그 포스트</h1>
      <div className="grid gap-6">
        {posts.map(post => (
          <article key={post.id} className="bg-white p-6 rounded-lg shadow">
            <h2 className="text-xl font-semibold mb-2">
              <a href={`/blog/${post.slug}`} className="text-gray-900 hover:text-blue-600">
                {post.title}
              </a>
            </h2>
            <p className="text-gray-600 mb-4">{post.excerpt}</p>
            <div className="flex items-center text-sm text-gray-500">
              <span>{new Date(post.date).toLocaleDateString()}</span>
              <span className="mx-2">•</span>
              <span>{post.readTime}</span>
            </div>
          </article>
        ))}
      </div>
    </div>
  )
}

// app/blog/[slug]/page.js
async function getPost(slug) {
  const res = await fetch(`https://api.example.com/posts/${slug}`);
  return res.json();
}

export async function generateMetadata({ params }) {
  const post = await getPost(params.slug);
  
  return {
    title: post.title,
    description: post.excerpt,
  };
}

export default async function PostPage({ params }) {
  const post = await getPost(params.slug);
  
  return (
    <article className="bg-white p-8 rounded-lg shadow">
      <header className="mb-8">
        <h1 className="text-4xl font-bold mb-4">{post.title}</h1>
        <div className="flex items-center text-gray-500">
          <span>{new Date(post.date).toLocaleDateString()}</span>
          <span className="mx-2">•</span>
          <span>{post.readTime}</span>
          <span className="mx-2">•</span>
          <span>{post.author}</span>
        </div>
      </header>
      <div className="prose max-w-none" dangerouslySetInnerHTML={{ __html: post.content }} />
    </article>
  )
}
```

## 🚀 마이그레이션 체크리스트

### ✅ 준비 단계
- [ ] Next.js 14로 업그레이드
- [ ] TypeScript 설정 확인 (해당되는 경우)
- [ ] ESLint 설정 업데이트

### ✅ 구조 변경
- [ ] `app` 디렉토리 생성
- [ ] 루트 레이아웃 작성
- [ ] 메타데이터 설정

### ✅ 페이지 마이그레이션
- [ ] 정적 페이지 이동
- [ ] 동적 라우트 변환
- [ ] 중첩 레이아웃 적용

### ✅ 데이터 페칭
- [ ] `getServerSideProps` → 서버 컴포넌트
- [ ] `getStaticProps` → 서버 컴포넌트 + 캐싱
- [ ] API 라우트 마이그레이션

### ✅ 최적화
- [ ] 로딩 UI 추가
- [ ] 에러 처리 구현
- [ ] 메타데이터 최적화
- [ ] 캐싱 전략 적용

### ✅ 테스트 및 배포
- [ ] 기능 테스트
- [ ] 성능 측정
- [ ] SEO 확인
- [ ] 프로덕션 배포

## 📚 결론

App Router는 React의 최신 기능들을 활용하여 더 나은 개발 경험과 성능을 제공합니다. 

### 🎯 주요 장점

1. **개선된 개발 경험**: 더 직관적인 폴더 구조
2. **향상된 성능**: 서버 컴포넌트와 스트리밍
3. **더 나은 SEO**: 향상된 메타데이터 관리
4. **유연한 레이아웃**: 중첩 레이아웃 시스템

### 🛣️ 다음 단계

- **React Server Components** 심화 학습
- **Streaming과 Suspense** 활용
- **Edge Runtime** 최적화
- **Parallel Routes와 Intercepting Routes** 고급 기능

점진적으로 마이그레이션하여 안정적으로 App Router의 이점을 누려보세요! 🚀
